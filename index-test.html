<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Maximum Reality | Imagination Emporium</title>
<style>
:root{--bg-dark:#050508;--card-bg:rgba(20,20,26,0.7);--accent-cyan:#00f2ff;--accent-orange:#ff8c00;--accent-purple:#bc13fe;--text-main:#e0e0e0;--glass-border:rgba(255,255,255,0.1);}
body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;background:var(--bg-dark);background-image:radial-gradient(circle at 50% 0%,#1a1a2e 0%,#050508 70%),linear-gradient(rgba(18,16,16,0) 50%,rgba(0,0,0,0.1) 50%),linear-gradient(90deg,rgba(255,0,0,0.03),rgba(0,255,0,0.01),rgba(0,0,255,0.03));background-size:100% 100%,100% 4px,3px 100%;color:var(--text-main);line-height:1.6;overflow-x:hidden;}
.home-link{position:fixed;top:20px;right:20px;font-size:28px;text-decoration:none;z-index:999;cursor:pointer;}
.home-link:hover{transform:scale(1.2);transition:transform 0.2s;}
.star-field{position:absolute;top:0;left:0;width:100%;height:500px;z-index:-1;pointer-events:none;}
.star{position:absolute;background:white;border-radius:50%;opacity:0.3;animation:twinkle var(--duration) infinite ease-in-out;}
@keyframes twinkle{0%,100%{transform:scale(1);opacity:0.3}50%{transform:scale(1.5);opacity:0.7}}
header{text-align:center;padding:40px 20px;position:relative;}
header img{max-width:280px;filter:drop-shadow(0 0 15px rgba(0,242,255,0.4));margin-bottom:15px;}
.tagline{font-family:'Courier New',monospace;font-size:0.85rem;color:var(--accent-cyan);text-transform:uppercase;letter-spacing:2px;opacity:0.9;}
.section{max-width:1200px;margin:0 auto;padding:30px 20px;}
h2{font-family:'Courier New',monospace;font-size:1.2rem;border-left:4px solid var(--accent-cyan);padding-left:15px;margin-bottom:25px;text-transform:uppercase;}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px;}
.card{background:var(--card-bg);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border:1px solid var(--glass-border);border-radius:18px;padding:18px;display:flex;flex-direction:column;transition:0.3s;}
.card:hover{transform:translateY(-5px);border-color:var(--accent-cyan);}
.card img{width:100%;border-radius:10px;margin-bottom:15px;}
.status{font-family:'Courier New',monospace;font-size:0.65rem;background:rgba(0,242,255,0.1);color:var(--accent-cyan);padding:3px 8px;border-radius:4px;margin-bottom:12px;width:fit-content;}
button{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.05);color:#555;font-family:'Courier New',monospace;font-size:0.75rem;cursor:not-allowed;}
.card img[src*="azulo"]{animation:realityGlitch 4s infinite;}
.card img[src*="mochkil_puffs_orange"]{animation:sneakyWiggle 3s ease-in-out infinite;}
@keyframes realityGlitch{0%,100%{filter:hue-rotate(0deg)}50%{filter:hue-rotate(15deg) brightness(1.1)}}
@keyframes sneakyWiggle{0%,100%{transform:rotate(0deg)}25%{transform:rotate(-2deg)}75%{transform:rotate(2deg)}}

/* GUESTBOOK STYLING */
#guestbook-section{max-width:600px;margin:40px auto;padding:20px;background:var(--card-bg);backdrop-filter:blur(12px);border-radius:16px;border:1px solid var(--glass-border);color:#e0e0e0;}
#guestbook-section h2{text-align:center;margin-bottom:15px;color:var(--accent-cyan);border:none;}
#guestbook-form{display:flex;gap:10px;margin-bottom:20px;}
#guestbook-form input{flex:1;padding:12px;border-radius:8px;border:1px solid var(--glass-border);background:rgba(255,255,255,0.05);color:#e0e0e0;font-family:'Courier New',monospace;}
#guestbook-form button{padding:8px 20px;border-radius:8px;border:none;background:var(--accent-cyan);color:#050508;cursor:pointer;font-weight:bold;width:auto;}
#guestbook-messages{max-height:400px;overflow-y:auto;padding-right:8px;display:flex;flex-direction:column;gap:10px;}
.guestbook-entry{padding:10px;border-radius:8px;background:rgba(0,242,255,0.05);border:1px solid rgba(0,242,255,0.2);color:var(--text-main);font-family:'Courier New',monospace;font-size:0.85rem;animation:entryFade 0.5s ease-out;}
@keyframes entryFade{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}

footer{padding:40px 20px;text-align:center;border-top:1px solid var(--glass-border);font-size:0.7rem;opacity:0.5;}
</style>
</head>
<body>
<a href="https://maximumreality.xyz" class="home-link" title="Back to Maximum Reality">üè†</a>
<div class="star-field" id="starField"></div>
<header>
<img src="store_sign.png" alt="Maximum Reality">
<div class="tagline">Artifacts from Adjacent Realities // Simulation Active</div>
</header>

<section class="section">
<h2>üß† Reality Science Division</h2>
<div class="grid">
<div class="card"><div class="status">Quantum Signature</div><img src="dr_azul_box.png"><h3>Dr. Azul ‚Äî Reality Science</h3><p>Chief researcher of improbable outcomes.</p><button disabled>INSPECT</button></div>
</div>
</section>

<section class="section">
<h2 style="border-color: var(--accent-orange);">üî• Chaos & Culture</h2>
<div class="grid">
<div class="card"><div class="status" style="color:var(--accent-orange);">Containment Failed</div><img src="mochkil_rap_figure_box.png"><h3>Mochkil ‚Äî Rap Figure</h3><p>Cultural disruptor and snack thief.</p><button disabled>INSPECT</button></div>
<div class="card" style="border-color: var(--accent-purple);"><div class="status" style="color: var(--accent-purple); background: rgba(188, 19, 254, 0.1);">Reality Event: 2nd Birthday</div><img src="unicorn_cake_glitch.jpg"><h3>The Unicorn ‚Äî Sprinkle Apocalypse</h3><p>A sugary singularity that alters digestive physics.</p><button disabled>CAKE DETECTED</button></div>
</div>
</section>

<section id="guestbook-section">
<h2>Simulation Logs</h2>
<form id="guestbook-form">
<input type="text" id="guestbook-message" placeholder="Type a transmission..." required>
<button type="submit">SEND</button>
</form>
<div id="guestbook-messages"></div>
</section>

<footer>
<p>‚ú® MAXIMUM REALITY IMAGINATION EMPORIUM // NO ITEMS FOR SALE</p>
</footer>

<script>
const field=document.getElementById('starField');for(let i=0;i<50;i++){const s=document.createElement('div');s.className='star';s.style.left=Math.random()*100+'%';s.style.top=Math.random()*100+'%';const sz=Math.random()*2+1;s.style.width=sz+'px';s.style.height=sz+'px';s.style.setProperty('--duration',Math.random()*3+2+'s');field.appendChild(s);}
</script>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js";
import { getFirestore, collection, addDoc, query, orderBy, onSnapshot, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";

const firebaseConfig={apiKey:"AIzaSyA7BUL17_d8j8TIsC1NKOasg0zXavtwVhI",authDomain:"maximum-reality-guestbook.firebaseapp.com",projectId:"maximum-reality-guestbook",storageBucket:"maximum-reality-guestbook.appspot.com",messagingSenderId:"401509956215",appId:"1:401509956215:web:a6863850cd51bc97b7a472",measurementId:"G-FCK7G1F95N"};

const app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app);
const CREATOR_UID = "F4fwM7oL0IekWsYymwzfkayUc0U2";

signInAnonymously(auth).catch(e=>console.error("Uplink Error:",e));

const messagesContainer=document.getElementById("guestbook-messages"),q=query(collection(db,"guestbookEntries"),orderBy("timestamp","asc"));

/* --- START OF UPDATED UPLINK --- */
onSnapshot(q, s => {
  messagesContainer.innerHTML = "";
  s.forEach(d => {
    const data = d.data();
    const msg = data.message || "";
    const e = document.createElement("div");
    e.className = "guestbook-entry";
    
    // Default Guest Settings
    let name = "[GUEST]";
    let displayMessage = msg;
    let borderColor = "rgba(0, 242, 255, 0.2)";
    let bgColor = "rgba(0, 242, 255, 0.05)";
    let labelColor = "var(--accent-cyan)";
    let animation = "entryFade 0.5s ease-out";

    // 1. Creator Mode (The Master Key)
    if (msg.includes("::mr::") || data.userId === CREATOR_UID) {
      name = "[CREATOR]";
      displayMessage = msg.replace("::mr::", "").trim();
      borderColor = "var(--accent-purple)";
      bgColor = "rgba(188, 19, 254, 0.1)";
      labelColor = "var(--accent-purple)";
    } 
    // 2. Azul Mode (Quantum Science)
    else if (msg.includes("::azul::")) {
      name = "[DR. AZUL] üß†";
      displayMessage = msg.replace("::azul::", "").trim();
      borderColor = "var(--accent-cyan)";
      bgColor = "rgba(0, 242, 255, 0.15)";
      labelColor = "var(--accent-cyan)";
    } 
    // 3. Mochkil Mode (Chaos & Snacks)
    else if (msg.includes("::chef::")) {
      name = "[CHEF MOCHKIL] üç≥";
      displayMessage = msg.replace("::chef::", "").trim();
      borderColor = "var(--accent-orange)";
      bgColor = "rgba(255, 140, 0, 0.2)";
      labelColor = "var(--accent-orange)";
      animation = "mochkilShake 0.3s infinite";
    }

    // Apply Styles to the element
    e.style.border = `1px solid ${borderColor}`;
    e.style.background = bgColor;
    e.style.marginBottom = "8px";
    e.style.padding = "10px";
    e.style.borderRadius = "8px";
    e.style.animation = animation;

    e.innerHTML = `<span style="color:${labelColor}; font-weight:bold; font-family:'Courier New', monospace;">${name}:</span> 
                   <span style="color:#fff;">${displayMessage}</span>`;
    
    messagesContainer.appendChild(e);
  });
  messagesContainer.scrollTop = messagesContainer.scrollHeight;
});

// Add this CSS for the Chef's Shake effect
if (!document.getElementById('mochkil-styles')) {
  const style = document.createElement('style');
  style.id = 'mochkil-styles';
  style.innerHTML = `
    @keyframes mochkilShake {
      0% { transform: translate(0,0); }
      25% { transform: translate(1px, -1px); }
      50% { transform: translate(-1px, 1px); }
      75% { transform: translate(1px, 1px); }
      100% { transform: translate(0,0); }
    }
  `;
  document.head.appendChild(style);
}
/* --- END OF UPDATED UPLINK --- */

const guestbookForm=document.getElementById("guestbook-form"),guestbookMessageInput=document.getElementById("guestbook-message");
guestbookForm.addEventListener("submit",async e=>{
  e.preventDefault();
  const m=guestbookMessageInput.value.trim();
  if(m && auth.currentUser){
    try {
      await addDoc(collection(db,"guestbookEntries"),{userId:auth.currentUser.uid,message:m,timestamp:serverTimestamp()});
      guestbookMessageInput.value="";
    } catch(err) { console.error("Broadcast failed:", err); }
  }
});
</script>
</body>
</html>
